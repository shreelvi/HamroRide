@model gurujiRide.Models.IndexViewModel
@{
    ViewData["Title"] = "Home Page";
}

<style>
    /* Recent requests small header and wide cards aligned to the right */
    .recent-requests-section h2 {
        font-size: 1.05rem;
        /* smaller header */
        margin-bottom: 6px;
    }

    .cards-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
        /* align cards to right */
        gap: 12px;
    }

    .cards-grid .card {
        flex: 0 0 520px;
        /* wide cards so content fits on single line where possible */
        max-width: 520px;
        min-width: 380px;
    }

    /* Prevent long labels from wrapping; truncate with ellipsis if too long */
    .ride-card .card-text {
        /* truncate on wide screens only */
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .ride-card .card-body {
        padding: 12px;
    }

    @@media (min-width: 900px) {

        /* Pin recent requests to the right as a fixed column on large screens */
        .recent-requests-section {
            position: fixed;
            right: 16px;
            top: 100px;
            width: 520px;
            z-index: 1200;
            background: rgba(255, 255, 255, 0.98);
            padding: 8px;
            border-radius: 6px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
            /* Make the panel scrollable so long lists don't extend past the viewport */
            max-height: calc(100vh - 140px);
            overflow: auto;
        }

        /* Stack cards vertically inside the fixed column and ensure they size to the column */
        .cards-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: stretch;
        }

        .cards-grid .card {
            flex: none;
            width: 100%;
            max-width: 100%;
            min-width: 0;
        }

        /* ensure the pinned panel receives pointer events and sits above map layers */
        .recent-requests-section {
            pointer-events: auto;
            z-index: 99999;
            /* ensure it sits above any map overlays */
        }

        /* sticky container inside the scrollable panel so the button remains visible */
        .load-more-container {
            position: -webkit-sticky;
            /* Safari */
            position: sticky;
            bottom: 0;
            background: linear-gradient(rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.98));
            padding: 8px 8px 8px 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100000;
            pointer-events: auto;
        }

        .load-more-container .btn {
            pointer-events: auto;
            z-index: 100001;
            display: block;
            width: calc(100% - 16px);
            max-width: 420px;
            background: #fff;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .ride-card .card-text {
            white-space: nowrap;
        }
    }

    @@media (max-width: 899px) {

        /* Mobile: make the recent requests inline and full-width */
        .recent-requests-section {
            position: static;
            width: 100%;
            padding: 0;
            box-shadow: none;
        }

        .cards-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .cards-grid .card {
            flex: 0 0 100%;
            max-width: 100%;
        }

        .ride-card .card-text {
            white-space: normal;
        }
    }
</style>

@* Form to submit a RideRequest (POST) *@


<div data-baseweb="block" class="css-PKJb">
    <section data-baseweb="block" class="css-gqcHgx">
        <div data-baseweb="block" class="css-hazmlH">
            <div data-baseweb="block" class="css-dpHrtI">
                <div data-baseweb="block" class="container-inner css-lpinv">
                    <div data-baseweb="block" data-testid="block-container" class="css-bVFrLX">
                        <div data-baseweb="block" class="css-gKercT">
                            <div data-baseweb="block" class="css-jnOCnc">
                                <div data-testid="content-group-dynamic" class="css-dkcVmX">
                                    <div data-baseweb="block" class="css-PKJb">
                                        <div class="css-etjCRc">
                                            <div data-testid="dotcom-ui.heading" class="css-hPnljU">
                                                <h1 data-testid="heading.base" class="css-bIdYaZ">Request a ride</h1>
                                            </div>

                                            @* Simple POST form (separate from the existing complex UI). This demonstrates model binding of typed Date/Time. *@
                                            @* <form method="post" action="@Url.Action("Index", "Home")">
                                                @Html.AntiForgeryToken()
                                                <div style="margin:12px 0;">
                                                    <label>Pickup<br />
                                                        <input type="text" name="Pickup"
                                                            value="@(Model?.NewRequest?.Pickup ?? String.Empty)" />
                                                    </label>
                                                </div>
                                                <div style="margin:12px 0;">
                                                    <label>Dropoff<br />
                                                        <input type="text" name="Dropoff"
                                                            value="@(Model?.NewRequest?.Dropoff ?? String.Empty)" />
                                                    </label>
                                                </div>
                                                <div style="margin:12px 0;">
                                                    <label>Date<br />
                                                        <input type="date" name="Date"
                                                            value="@(Model?.NewRequest?.Date?.ToString("yyyy-MM-dd") ?? String.Empty)" />
                                                    </label>
                                                </div>
                                                <div style="margin:12px 0;">
                                                    <label>Time<br />
                                                        <input type="time" name="Time"
                                                            value="@(Model?.NewRequest?.Time?.ToString(@"hh\:mm") ?? String.Empty)" />
                                                    </label>
                                                </div>
                                                <div style="margin:12px 0;">
                                                    <button type="submit" class="css-cxqKro">Request ride</button>
                                                </div>

                                                
                                            </form> *@
                                        </div>
                                    </div>


                                </div>
                                <div data-baseweb="block" data-testid="child-content-desktop" class="css-bKLnG">
                                    <form method="post">
                                        @Html.AntiForgeryToken()
                                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                                        <div class="css-cInfKi">
                                            <div>
                                                <div data-testid="cro-map-hero.ride.form-and-cta-container"
                                                    class="css-bgjXJM">
                                                    <div class="css-eqICon">
                                                        <div class="css-UtXZf">
                                                            <div data-baseweb="block" class="css-bunVky">
                                                                <div style="position: relative;">
                                                                    @* <label class="css-dGWkvU"
                                                                        for="rv-pudo-select-0.t306yk7yoc">
                                                                        <p data-baseweb="typo-paragraphmedium"
                                                                            class="css-cNJbLP">Pickup location</p>
                                                                    </label> *@
                                                                    <div data-uweb-guide-key="RV_PUDO_PICKUP_INPUT">
                                                                        <div data-baseweb="select"
                                                                            data-testid="pudo-select-v2"
                                                                            class="css-gpyJyz">
                                                                            <div class="css-jmfNpg">
                                                                                <div class="css-jrqkC">
                                                                                    <svg width="20" height="20"
                                                                                        viewBox="0 0 24 24" fill="none"
                                                                                        data-baseweb="icon">
                                                                                        <title>search</title>
                                                                                        <path fill-rule="evenodd"
                                                                                            clip-rule="evenodd"
                                                                                            d="M12 23c6.075 0 11-4.925 11-11S18.075 1 12 1 1 5.925 1 12s4.925 11 11 11Zm0-8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
                                                                                            fill="currentColor"></path
                                                                                            </svg>
                                                                                </div>

                                                                                <div data-tracking="disabled"
                                                                                    aria-label="pickup location input"
                                                                                    class="css-kImiCK">
                                                                                    <div class="css-kLKDje">
                                                                                        <input aria-autocomplete="list"
                                                                                            aria-expanded="false"
                                                                                            aria-haspopup="listbox"
                                                                                            aria-label="Pickup location needs to be filled in"
                                                                                            role="combobox" tabindex="0"
                                                                                            data-testid="dotcom-ui.pickup-destination.input.pickup"
                                                                                            inputmode="text"
                                                                                            asp-for="NewRequest.Pickup"
                                                                                            class="css-fsnQlw"
                                                                                            placeholder="Pickup location"
                                                                                            required />
                                                                                        <div class="css-EEyoV"></div>
                                                                                    </div>
                                                                                    <span class="text-danger"
                                                                                        asp-validation-for="NewRequest.Pickup"></span>

                                                                                    <div data-testid="dotcom-ui.pickup-destination.placeholder.pickup"
                                                                                        class="css-jfDTkw"></div>
                                                                                </div>

                                                                                <div data-testid="clear-button"
                                                                                    class="css-cWhSmV css-jYsWkC">
                                                                                    <div class="css-cmdxYm">
                                                                                        <svg width="1em" height="1em"
                                                                                            viewBox="0 0 24 24"
                                                                                            fill="none"
                                                                                            aria-label="Auto-fill my location"
                                                                                            class="pe-location-fetch css-bOZeEP"
                                                                                            role="button" tabindex="0">
                                                                                            <path
                                                                                                d="M10.5 13.5.5 11 21 3l-8 20.5-2.5-10Z"
                                                                                                fill="currentColor">
                                                                                            </path>
                                                                                        </svg>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div data-baseweb="block" class="css-ldbowJ">
                                                                <div style="position: relative;">
                                                                    @* <label class="css-dGWkvU"
                                                                        for="rv-pudo-select-0.x21rktt57v">
                                                                        <p data-baseweb="typo-paragraphmedium"
                                                                            class="css-cNJbLP">Dropoff location</p>
                                                                    </label> *@

                                                                    <div
                                                                        data-uweb-guide-key="RV_PUDO_DESTINATION_INPUT">
                                                                        <div data-baseweb="select"
                                                                            data-testid="pudo-select-v2"
                                                                            class="css-gpyJyz">
                                                                            <div class="css-jmfNpg">
                                                                                <div class="css-jrqkC">
                                                                                    <svg width="20" height="20"
                                                                                        viewBox="0 0 24 24" fill="none"
                                                                                        data-baseweb="icon">
                                                                                        <title>search</title>
                                                                                        <path fill-rule="evenodd"
                                                                                            clip-rule="evenodd"
                                                                                            d="M22 2H2v20h20V2Zm-7 7H9v6h6V9Z"
                                                                                            fill="currentColor"></path>
                                                                                    </svg>
                                                                                </div>
                                                                                <div data-tracking="disabled"
                                                                                    aria-label="destination location input"
                                                                                    class="css-kImiCK">
                                                                                    <div class="css-kLKDje">
                                                                                        <input aria-autocomplete="list"
                                                                                            aria-expanded="false"
                                                                                            aria-haspopup="listbox"
                                                                                            aria-label="Dropoff location needs to be filled in"
                                                                                            role="combobox" tabindex="0"
                                                                                            data-testid="dotcom-ui.pickup-destination.input.destination.drop0"
                                                                                            inputmode="text"
                                                                                            asp-for="NewRequest.Dropoff"
                                                                                            class="css-fsnQlw"
                                                                                            placeholder="Dropoff location"
                                                                                            required />
                                                                                        <div class="css-EEyoV"></div>
                                                                                    </div>
                                                                                    <span class="text-danger"
                                                                                        asp-validation-for="NewRequest.Dropoff"></span>

                                                                                    <div data-testid="dotcom-ui.pickup-destination.placeholder.destination.drop0"
                                                                                        class="css-jfDTkw"></div>
                                                                                </div>


                                                                                <div data-testid="clear-button"
                                                                                    class="css-cWhSmV css-jYsWkC"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>



                                                            <div class="css-jkbjYp"></div>
                                                        </div>


                                                        <div data-baseweb="block" class="css-cvpIEi css-ebzWAP"
                                                            data-testid="dotcom-ui.data-time-picker-container.default"
                                                            data-uweb-guide-key="DOTCOM_UI_COMBINED_DATE_TIME_CONTAINER">
                                                            <div class="css-cYTjpz">
                                                                <label for="trip-form-date-picker-0.hwc12kfh17n">
                                                                    <p data-baseweb="typo-paragraphsmall"
                                                                        class="css-hljex">
                                                                        Date</p>
                                                                </label>
                                                                <div class="css-Qbhli"
                                                                    data-uweb-guide-key="DATE_PICKER">
                                                                    <div class="css-cYTjpz">
                                                                        <div data-baseweb="input" class="css-hnpcQn">
                                                                            <div data-baseweb="base-input"
                                                                                class="css-gKbRfz">
                                                                                <input aria-label="Select a date."
                                                                                    aria-invalid="false"
                                                                                    autocomplete="on"
                                                                                    asp-for="NewRequest.Date"
                                                                                    type="date"
                                                                                    data-testid="dotcom-ui.date-picker.input"
                                                                                    class="css-eSRvYO"
                                                                                    aria-describedby="uid1" />
                                                                            </div>
                                                                            <span class="text-danger"
                                                                                asp-validation-for="NewRequest.Date"></span>
                                                                        </div>
                                                                    </div>


                                                                    <p id="uid1"
                                                                        style="position: fixed; width: 0px; height: 0px; border-width: 0px; padding: 0px; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);">
                                                                        Press the down arrow key to interact with the
                                                                        calendar and select a date. Press the escape
                                                                        button
                                                                        to close the calendar.</p>

                                                                    <p aria-live="assertive"
                                                                        style="position: fixed; width: 0px; height: 0px; border-width: 0px; padding: 0px; overflow: hidden; clip: rect(0px, 0px, 0px, 0px); clip-path: inset(100%);">
                                                                    </p>

                                                                    <div class="css-fCLXtX">
                                                                        <svg width="1em" height="1em"
                                                                            viewBox="0 0 24 24" fill="none"
                                                                            aria-hidden="true" color="#000000"
                                                                            data-testid="calendar-filled">
                                                                            <title>Calendar</title>
                                                                            <path fill-rule="evenodd"
                                                                                clip-rule="evenodd"
                                                                                d="M23 8V4h-3V1h-3v3H7V1H4v3H1v4h22Zm0 15H1V10h22v13ZM8 14H5v3h3v-3Z"
                                                                                fill="currentColor"></path>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="css-cYTjpz"><label
                                                                    for="trip-form-time-picker-0.pao1yvz8h6e">
                                                                    <p data-baseweb="typo-paragraphsmall"
                                                                        class="css-hljex">
                                                                        Time</p>
                                                                </label>
                                                                <div class="css-Qbhli">
                                                                    <div class="css-">
                                                                        <div class="css-ehJLpI">
                                                                            <div class="css-hQrlmS">
                                                                                <div>
                                                                                    <input asp-for="NewRequest.Time"
                                                                                        type="time"
                                                                                        style="margin-left: 22px" />

                                                                                </div>


                                                                            </div>



                                                                        </div>
                                                                    </div>



                                                                    <div class="css-fCLXtX">
                                                                        <svg width="1em" height="1em"
                                                                            viewBox="0 0 24 24" fill="none"
                                                                            aria-hidden="true" color="#000000"
                                                                            data-testid="clock-filled">
                                                                            <title>Clock</title>
                                                                            <path
                                                                                d="M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1Zm6 13h-8V4h3v7h5v3Z"
                                                                                fill="currentColor"></path>
                                                                        </svg>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    @* <div>
                                                        <p data-baseweb="typo-paragraphmedium" class="css-dTqljZ">
                                                            Destination suggestions</p>
                                                        <div data-testid="RevealAnimationWrapper"
                                                            style="height: auto; opacity: 1; overflow: hidden; transition: 1s;">
                                                            <button aria-label="destination shortcut item"
                                                                data-tracking="disabled"
                                                                data-testid="dotcom-ui.location-suggestion"
                                                                class="css-gQFwWm">
                                                                <div class="css-jnYoLS">
                                                                    <svg width="16" height="16" viewBox="0 0 24 24"
                                                                        fill="none">
                                                                        <title>Clock</title>
                                                                        <path
                                                                            d="M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1Zm6 13h-8V4h3v7h5v3Z"
                                                                            fill="currentColor"></path>
                                                                    </svg>
                                                                </div>

                                                                <div data-tracking="disabled"
                                                                    aria-label="destination shortcut item"
                                                                    class="css-dWzzPr">
                                                                    <div class="css-bZYltD">
                                                                        <p class="css-jYoXid">Dallas Fort Worth
                                                                            International Airport (DFW)</p>
                                                                        <p class="css-eJDa-Df">2400 Aviation Dr, DFW
                                                                            Airport, TX</p>
                                                                    </div>
                                                                </div>
                                                            </button>

                                                            <button aria-label="destination shortcut item"
                                                                data-tracking="disabled"
                                                                data-testid="dotcom-ui.location-suggestion"
                                                                class="css-gQFwWm">
                                                                <div class="css-jnYoLS"><svg width="16" height="16"
                                                                        viewBox="0 0 24 24" fill="none">
                                                                        <title>Clock</title>
                                                                        <path
                                                                            d="M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1Zm6 13h-8V4h3v7h5v3Z"
                                                                            fill="currentColor"></path>
                                                                    </svg></div>
                                                                <div data-tracking="disabled"
                                                                    aria-label="destination shortcut item"
                                                                    class="css-dWzzPr">
                                                                    <div class="css-bZYltD">
                                                                        <p class="css-jYoXid">Dallas Love Field Airport
                                                                            (DAL)</p>
                                                                        <p class="css-eJDa-Df">8008 Herb Kelleher Way,
                                                                            Dallas, TX</p>
                                                                    </div>
                                                                </div>
                                                            </button>
                                                        </div>
                                                    </div> *@
                                                    <div style="margin:12px 0;">
                                                        <div style="margin:12px 0;" class="css-jmfNpg">
                                                            <input asp-for="NewRequest.Name" type="text"
                                                                class="css-fsnQlw" placeholder="Name" required />
                                                            <span class="text-danger"
                                                                asp-validation-for="NewRequest.Name"></span>
                                                        </div>
                                                        <div style="margin:12px 0;" class="css-jmfNpg">
                                                            <input asp-for="NewRequest.Contact" type="text"
                                                                class="css-fsnQlw"
                                                                placeholder="Contact(number/FBMessengerLink)"
                                                                required />
                                                            <span class="text-danger"
                                                                asp-validation-for="NewRequest.Contact"></span>
                                                            <button type="button" class="btn btn-link p-0 align-middle" data-bs-toggle="tooltip" data-bs-placement="right" title="Tip: paste an m.me or facebook profile link (e.g. m.me/username) into the Contact field to enable quick messaging.">
                                                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                                                                    <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm.93 12.588c-.39.39-1.02.39-1.41 0-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41zM8 3.5a.9.9 0 0 1 .9.9v.2c0 .5-.4.9-.9.9s-.9-.4-.9-.9v-.2c0-.5.4-.9.9-.9zm1.2 4.2c-.1.2-.2.3-.3.4-.2.2-.4.4-.5.7-.1.2-.1.5-.1.9H7.6c0-.5.1-.8.3-1.1.2-.3.4-.5.6-.7.2-.2.4-.4.5-.7.1-.2.2-.5.2-.8 0-.4-.1-.7-.3-.9-.2-.2-.5-.3-.9-.3-.5 0-.9.2-1.1.6-.1.2-.2.4-.2.6H4.9c0-.6.2-1.1.6-1.6.5-.7 1.3-1 2.4-1 1 0 1.7.3 2.1 1 .4.6.5 1.3.5 2 0 .4-.1.7-.3 1z" />
                                                                </svg>
                                                                <span class="visually-hidden">Contact help</span>
                                                            </button>
                                                        </div>



                                                        <div style="margin:12px 0;">
                                                            <button type="submit" class="btn btn-outline-primary">Request
                                                                ride</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        @* Submission confirmation (shows last submitted values when present) *@
                                            @if (ViewData["Submitted"] != null)
                                        {
                                            <div style="margin-top:12px;padding:8px;border:1px solid #ccc;">
                                                <strong>Submitted:</strong>
                                                <div>Pickup: @Model?.NewRequest?.Pickup</div>
                                                <div>Dropoff: @Model?.NewRequest?.Dropoff</div>
                                                <div>Date: @Model?.NewRequest?.Date?.ToString("yyyy-MM-dd")</div>
                                                <div>Time: @Model?.NewRequest?.Time?.ToString(@"hh\:mm")</div>
                                            </div>
                                        }
                                        </form>

                                <!-- Offer CTA placed below the main request form. Opens Offer page in a new tab. -->
                                <div style="clear:both; margin-top:12px; margin-bottom:12px; max-width:520px;">
                                    <small class="d-block mt-2 text-muted">Going somewhere and want to offer a ride?                                      <a asp-action="Offer" target="_blank" rel="noopener noreferrer" class="">Offer a ride</a></small>
                                </div>

                                </div>
                            </div>





                            <div class="recent-requests-section" style="margin:16px 0;">
                                <h2 class="css-bIdYaZ">Recent ride requests</h2>
                                <div class="cards-grid d-flex flex-wrap">
                                    @if (Model?.RecentRequests != null && Model.RecentRequests.Any())
                                    {
                                        foreach (var req in Model.RecentRequests.Take(4))
                                        {
                                            @await Html.PartialAsync("_RideRequestCard", req)
                                        }
                                    }
                                    else
                                    {
                                        <div>No recent requests to show.</div>
                                    }
                                </div>

                                <div style="margin-top:12px; display:flex; justify-content:center; align-items:center; min-height:32px;">
                                    <a asp-action="Lyft" asp-route-includeAll="true" class="btn btn-outline-primary">Load more / View all on Lyft page</a>
                                </div>

                                <!-- Latest ride offers (show below recent requests) -->
                                <div style="margin-top:18px;">
                                    <h2 class="css-bIdYaZ">Recent ride offers</h2>
                                    <div class="cards-grid d-flex flex-wrap">
                                        @if (Model?.RecentOffers != null && Model.RecentOffers.Any())
                                        {
                                            foreach (var o in Model.RecentOffers.Take(4))
                                            {
                                                @await Html.PartialAsync("_OfferRideCard", o)
                                            }
                                        }
                                        else
                                        {
                                            <div>No recent offers to show.</div>
                                        }
                                    </div>
                                </div>
                            </div>

                            
                        </div>

                        <div class="css-dryfNa">
                            <h3 class="css-gATgry">Benefits</h3>
                            <ul class="css-cAzctG">
                                <li aria-label="Choose your exact pickup time up to 90 days in advance."
                                    class="css-elXnqf">
                                    <div class="css-jnYoLS"><img alt=""
                                            src="https://tb-static.uber.com/prod/udam-assets/e12eddee-f082-49f7-a5fc-22c17977de50.svg"
                                            class="css-hmxZjQ"></div>
                                    <div class="css-dWzzPr">
                                        <div class="css-bZYltD">
                                            <p class="css-ivMWY">Driving somewhere and want to lyft someone and earn money?
                                            </p>
                                        </div>
                                    </div>
                                </li>
                                <li aria-label="Extra wait time included to meet your ride." class="css-elXnqf">
                                    <div class="css-jnYoLS"><img alt=""
                                            src="https://tb-static.uber.com/prod/udam-assets/30f5ecd4-8ccf-44d0-9976-2833f69df8a9.svg"
                                            class="css-hmxZjQ"></div>
                                    <div class="css-dWzzPr">
                                        <div class="css-bZYltD">
                                            <p class="css-ivMWY">Easily sort and filter through requested rides and find a passenger going your way</p>
                                        </div>
                                    </div>
                                </li>
                                @* <li aria-label="Cancel at no charge up to 60 minutes in advance." class="css-elXnqf">
                                    <div class="css-jnYoLS"><img alt=""
                                            src="https://tb-static.uber.com/prod/udam-assets/45ebda59-6a0d-41e3-a924-0dbbce078029.svg"
                                            class="css-hmxZjQ"></div>
                                    <div class="css-iKqlwj">
                                        <div class="css-bZYltD">
                                            <p class="css-ivMWY"></p>
                                        </div>
                                    </div>
                                </li> *@
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    // Mobile form: copy desktop values into hidden fields before submit so mobile form submits the full NewRequest
    (function () {
        const form = document.getElementById('mobile-contact-form');
        if (!form) return;

        function ensureHiddenInput(name, value) {
            let input = form.querySelector('input[name="' + name + '"]');
            if (!input) {
                input = document.createElement('input');
                input.type = 'hidden';
                input.name = name;
                form.appendChild(input);
            }
            input.value = value ?? '';
        }

        form.addEventListener('submit', function (e) {
            // copy values from page inputs (try several selectors)
            const mapName = {
                'NewRequest.Pickup': ['input[name="NewRequest.Pickup"]', 'input[name="Pickup"]', 'input[id$="Pickup"]'],
                'NewRequest.Dropoff': ['input[name="NewRequest.Dropoff"]', 'input[name="Dropoff"]', 'input[id$="Dropoff"]'],
                'NewRequest.Date': ['input[name="NewRequest.Date"]', 'input[name="Date"]', 'input[id$="Date"]'],
                'NewRequest.Time': ['input[name="NewRequest.Time"]', 'input[name="Time"]', 'input[id$="Time"]']
            };

            for (const key of Object.keys(mapName)) {
                const selectors = mapName[key];
                let val = '';
                for (const sel of selectors) {
                    const el = document.querySelector(sel);
                    if (el && el.value !== undefined) { val = el.value; break; }
                }
                ensureHiddenInput(key, val);
            }

            // allow submit to continue
        });
    })();

    // Replaced infinite scroll with a link/button to the Lyft page (Load more)
</script>

<script>
    // Initialize Bootstrap tooltips if available
    (function () {
        try {
            if (typeof bootstrap !== 'undefined' && bootstrap.Tooltip) {
                var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
                tooltipTriggerList.map(function (el) { return new bootstrap.Tooltip(el); });
            }
        }
        catch (e) { console.debug('Tooltip init failed', e); }
    })();
</script>